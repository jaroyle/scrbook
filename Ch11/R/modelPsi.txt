
model {

beta0 ~ dunif(-5, 5)
beta1 ~ dunif(-5, 5)
p0 ~ dbeta(1,1)
sigma ~ dunif(0, 2)

for(i in 1:M) {
  sx[i] ~ dunif(0,1)
  sy[i] ~ dunif(0,1)
  elev[i] <- sx[i] + sy[i]
  logit(psi[i]) <- beta0 + beta1*elev[i]
  w[i] ~ dbern(psi[i])
  for(j in 1:J) {
    d2[i,j] <- pow(sx[i]-X[j,1], 2) + pow(sy[i]-X[j,2], 2)
    p[i,j] <- w[i]*p0*exp(-d2[i,j]/(2*sigma*sigma))
    y[i,j] ~ dbin(p[i,j], K)
  }
}
N <- sum(w[])

}
